

# 만들면서 생각


#### Request 객체 관련

- 기능마다 Request 객체를 생성하려고 했으나 생각해보니 중복되는 부분이 많고 다른 기능이 추가될때마다
  쓸데없는 코드가 많아진다고 생각
-> 중복되는 값들을 많이 쓰는것들을 모아 Request 객체를 만들고 컨버트해서 나눠 처리

### Request 값의 블랭크 및 null 체크

- 처음에는 starter-validation의 @NotBlank를 쓰려고 했으나 위의 객체 통합을 해버려서 인증을 통과하기 
  위해 필요없는 값까지 넣어줘야 하는 경우가 발생
-> NotBlank 관련 검증을 따로 만들자

### NotBlank 검증 관련

- 리플렉션과 가변인수를 활용해 입력받은 객체의 가변인수 값들을 체크하는 방식으로 만듦

## 이미지


### 에디터

- 게시판 에디터는 TOAST 에디터가 꾸준히 업데이트하고 있어서 결정

### 이미지 저장 방식

- 이미지 저장 방식 고민
-> 여러개의 이미지를 저장할거라 테이블 분리, 원본 이름과 uuid 이름 path로 나눔
-> 로컬에 임시저장 하고 사용자가 글 작성시 스토리지에 올리는 방식으로 결정
-> 임시저장하는 방식 고민 필요할듯
- 임시 저장시 이름 문제
-> 임시 저장소에 저장시에도 이름 중복 될 수 있어 uuid + _ + origin 으로 결정함
- 이미지 삽입 시 foreach 사용 대신 성능 개선 방안 모색
- 글 저장시 HTML 저장 이미지 주소 스토리지 주소로 바꾸기 필요
-> 파싱 라이브러리 찾음. 이미지 주소 바꾸고 저장함
- 이미지 저장방식부터 개선방법 있는지 찾아봐야할듯

### 외래키 사용 이슈

- 외래키 사용 시 제약 조건 체크로 속도가 느려지는것 확인했고 수정시 불편하기 때문에 제약 안넣기로 결정

### 이미지 스토리지

- 무료 클라우드를 활용하기 때문에 공간이 따로 필요해 계정을 많이 만들 수 있는 구글 스토리지로 결정

### 예외처리


### 글 수정 시 이미지 문제
- 수정된 이미지 어떻게 할까 고민하다가 DB는 전체 지우고 다시 넣기로 생각, 스토리지는 어떻게 할지 방법 고민
- 디렉토리 만들어서 할까 고민했지만 지금 상황에서 저장후 수정등 작업 많이 필요해 삭제할때 해당 이미지 테이블 값들 select로 불러와서 삭제로 결정
- 수정과 글 등록 이미지 처리 겹치는 부분 리팩토링 고민